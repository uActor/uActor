function receive(message)
  
  if(message.type == "init") then
    pub = Publication.new("type", "ble_advertisement")
    pub["0x01"] = encode_base64(string.char(0x06))
    pub["0xFF"] = encode_base64(string.char(
      0x4c, 0x00,
      0x02, 0x15,
      0x11, 0x11, 0x11, 0x11,
      0x11, 0x11, 0x11, 0x11,
      0x11, 0x11, 0x11, 0x11,
      0x11, 0x11, 0x11, 0x11,
      0x00, 0x00,
      0x11, 0x11,
      0xFF
    ))
    publish(pub)

    pub2 = Publication.new("type", "ble_advertisement")
    pub2["0x01"] = encode_base64(string.char(0x06))
    pub2["0xFF"] = encode_base64(string.char(
      0x4c, 0x00,
      0x02, 0x15,
      0xFF, 0xFF, 0xFF, 0xFF,
      0x11, 0x11, 0x11, 0x11,
      0x11, 0x11, 0x11, 0x11,
      0x11, 0x11, 0x11, 0x11,
      0x00, 0x00,
      0x11, 0x11,
      0xFF
    ))
    delayed_publish(pub2, 30000)
  end
end